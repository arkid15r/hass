- binary_sensor:
    - name: Mode Bar
      unique_id: mode_bar
      state: >
        {{ is_state('input_boolean.mode_bar', 'on') }}

    - name: Mode Bedroom 1 Blackout
      unique_id: mode_bedroom_1_blackout
      state: >
        {%- macro is_in_range(value, time_from, time_to) %}
          {%- if time_from < time_to %}
            {%- if time_from <= value < time_to %}
              {{- time_from <= value < time_to }}
            {%- endif %}
          {%- elif value >= time_from or value < time_to %}
            {{- value >= time_from or value < time_to }}
          {%- endif %}
        {%- endmacro %}

        {{ is_in_range(
              now().strftime('%H:%M:%S'),
              states('input_datetime.post_quite_time_range_3'),
              states('input_datetime.pre_quite_time_range_3')) and
           is_state('binary_sensor.bedroom_1_blacked_out', 'on') and
           is_state('binary_sensor.mode_nap', 'off')
        }}

    - name: Mode Belle
      unique_id: mode_belle
      state: >
        {{ is_state('input_boolean.mode_belle', 'on') }}

    - name: Mode Gym
      unique_id: mode_gym
      state: >
        {{ is_state('input_boolean.mode_gym', 'on') }}

    - name: Mode Nap
      unique_id: mode_nap
      state: >
        {{ is_state('input_boolean.mode_nap', 'on') }}

    - name: Mode Office 2 Lights
      unique_id: mode_office_2_lights
      state: >
        {{ is_state('input_boolean.mode_office_2_lights', 'on') }}

    - name: Mode Red
      unique_id: mode_red
      state: >
        {{ is_state('input_boolean.mode_red', 'on') }}

    - name: Mode Shower
      unique_id: mode_shower
      state: >
        {{ is_state('input_boolean.mode_shower', 'on') }}

    - name: Mode Spa
      unique_id: mode_spa
      state: >
        {{ is_state('input_boolean.mode_spa', 'on') }}

    - name: Mode Wake Up Lighting
      unique_id: mode_wake_up_lighting
      state: >
        {{ is_state('input_boolean.mode_wake_up_lighting', 'on') }}
