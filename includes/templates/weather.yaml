- sensor:
    - unique_id: outdoor_temperature
      name: Outdoor Temperature
      unit_of_measurement: °F
      state: >
        {{ expand('group.weather_service')|
             map(attribute='attributes.temperature')|
             map('float')|list|average|round
        }}

    - unique_id: temperature_forecast
      name: Temperature Forecast
      unit_of_measurement: °F
      state: >
        {{ expand('group.weather_service')|
             map(attribute='attributes.forecast.0.temperature')|
             map('float')|list|average|round
        }}

    - unique_id: temperature_low_forecast
      name: Temperature Low Forecast
      unit_of_measurement: °F
      state: >
        {{ expand('group.weather_service')|
             map(attribute='attributes.forecast.0.templow')|
             map('float')|list|average|round
        }}

    - unique_id: weather_forecast_summary
      name: Weather Forecast Summary
      state: >
        {% if states('sensor.temperature_low_forecast')|int < 35 or
              states('sensor.wind_speed_forecast')|int >= 25
        %}
          extremely concerning
        {% elif states('sensor.temperature_low_forecast')|int < 45 or
                states('sensor.wind_speed_forecast')|int >= 15
        %}
          very concerning
        {% elif states('sensor.temperature_low_forecast')|int < 55 or
                states('sensor.wind_speed_forecast')|int >= 5
        %}
          a bit concerning
        {% else %}
          fine
        {% endif %}

    - unique_id: wind_speed
      name: Wind Speed
      unit_of_measurement: mph
      state: >
        {{ expand('group.weather_service')|
             map(attribute='attributes.wind_speed')|
             map('float')|list|average|round
        }}

    - unique_id: wind_speed_forecast
      name: Wind Speed Forecast
      unit_of_measurement: mph
      state: >
        {{ expand('group.weather_service')|
             map(attribute='attributes.forecast.0.wind_speed')|
             map('float')|list|average|round
        }}
