- id: alarm_schedule
  alias: Alarm Schedule
  trigger:
    - platform: time
      at: input_datetime.alarm_time_on
    - platform: time
      at: input_datetime.alarm_time_off
  action:
    - choose:
        - conditions:
            - condition: time
              after: input_datetime.alarm_time_on
          sequence:
            - service: scene.turn_on
              target:
                entity_id: scene.alarm_armed_home
        - conditions:
            - condition: time
              after: input_datetime.alarm_time_off
          sequence:
            - service: scene.turn_on
              target:
                entity_id: scene.alarm_disarmed

- id: garage_gate_opener_on_alarm_state
  alias: Garage Gate Opener On Alarm State
  trigger:
    - platform: state
      entity_id: alarm_control_panel.home_alarm
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.alarm_armed
              state: 'on'
          sequence:
            - service: scene.turn_on
              target:
                entity_id: scene.garage_gate_opener_off
        - conditions:
            - condition: state
              entity_id: binary_sensor.alarm_armed
              state: 'off'
          sequence:
            - service: scene.turn_on
              target:
                entity_id: scene.garage_gate_opener_on
