- id: tts_state_outdoor_perimeter_off
  alias: '[TTS State: Outdoor Perimeter Off]'
  use_blueprint:
    path: tts_state.yaml
    input:
      state_change_entity: &sensors
        - binary_sensor.front_left_gate
        - binary_sensor.front_right_gate
      state_change_from: 'on'
      state_change_to: 'off'
      text: >
        <audio src="soundbank://soundlibrary/office/amzn_sfx_elevator_open_bell_01"/>
        {{ state_attr(trigger.entity_id, 'friendly_name') }} closed.
  mode: queued
  max: 10

- id: tts_state_outdoor_perimeter_on
  alias: '[TTS State: Outdoor Perimeter On]'
  use_blueprint:
    path: tts_state.yaml
    input:
      state_change_entity: *sensors
      state_change_from: 'off'
      state_change_to: 'on'
      text: >
        <audio src="soundbank://soundlibrary/office/amzn_sfx_elevator_open_bell_01"/>
        {{ state_attr(trigger.entity_id, 'friendly_name') }} opened.
  mode: queued
  max: 10

- id: tts_state_repeat_outdoor_perimeter_on
  alias: '[TTS State: Repeat Outdoor Perimeter On]'
  trigger:
    - platform: state
      entity_id: *sensors
      from: 'off'
      to: 'on'
  condition:
    - condition: state
      entity_id: input_boolean.play_tts_messages
      state: 'on'
    - condition: state
      entity_id: binary_sensor.alarm_armed
      state: 'on'
  action:
    - delay:
        seconds: 1
    - event: tts
      event_data:
        text: >
          I repeat! {{ state_attr(trigger.entity_id, 'friendly_name') }} opened.
  mode: queued
  max: 10

- id: tts_state_outdoor_perimeter_on_5m
  alias: '[TTS State: Outdoor Perimeter On 5m]'
  use_blueprint:
    path: tts_state.yaml
    input:
      state_change_entity: *sensors
      state_change_for_time_seconds: 300
      state_change_from: 'off'
      state_change_to: 'on'
      text: >
        <audio src="soundbank://soundlibrary/alarms/beeps_and_bloops/tone_05"/>
        Just FYI: the {{ state_attr(trigger.entity_id, 'friendly_name') }} is still open.'

- id: tts_state_outdoor_perimeter_on_10m
  alias: '[TTS State: Outdoor Perimeter On 10m]'
  use_blueprint:
    path: tts_state.yaml
    input:
      state_change_entity: *sensors
      state_change_for_time_seconds: 600
      state_change_from: 'off'
      state_change_to: 'on'
      text: >
        <audio src="soundbank://soundlibrary/alarms/beeps_and_bloops/tone_05"/>
        The {{ state_attr(trigger.entity_id, 'friendly_name') }} is still open.<break time="350ms"/><prosody pitch="x-low">I'm just saying</prosody>.
